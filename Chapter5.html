<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.531">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>비즈니스 애널리틱스 (Business Analytics) - 5&nbsp; 이원배치 분산분석</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Chapter6.html" rel="next">
<link href="./Chapter4.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Chapter5.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">이원배치 분산분석</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">비즈니스 애널리틱스 (Business Analytics)</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">오리엔테이션</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">통계학의 본질과 변수의 이해</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">기술통계와 요약</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">일원배치 분산분석</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter5.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">이원배치 분산분석</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">회귀분석: 통계의 꽃</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">조절효과와 매개효과</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">차원축소와 주성분 분석</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">요인분석</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">계층적 군집분석</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Chapter11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">k-평균 군집분석</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#이원배치-분산분석이란-무엇인가" id="toc-이원배치-분산분석이란-무엇인가" class="nav-link active" data-scroll-target="#이원배치-분산분석이란-무엇인가"><span class="header-section-number">5.1</span> 이원배치 분산분석이란 무엇인가?</a>
  <ul class="collapse">
  <li><a href="#복잡한-세상을-설명하는-새로운-도구" id="toc-복잡한-세상을-설명하는-새로운-도구" class="nav-link" data-scroll-target="#복잡한-세상을-설명하는-새로운-도구"><span class="header-section-number">5.1.1</span> 복잡한 세상을 설명하는 새로운 도구</a></li>
  <li><a href="#단순한-anova와의-차이" id="toc-단순한-anova와의-차이" class="nav-link" data-scroll-target="#단순한-anova와의-차이"><span class="header-section-number">5.1.2</span> 단순한 ANOVA와의 차이</a></li>
  <li><a href="#주효과와-상호작용-효과의-개념" id="toc-주효과와-상호작용-효과의-개념" class="nav-link" data-scroll-target="#주효과와-상호작용-효과의-개념"><span class="header-section-number">5.1.3</span> 주효과와 상호작용 효과의 개념</a></li>
  <li><a href="#외식산업에서-이원배치-분산분석이-필요한-이유" id="toc-외식산업에서-이원배치-분산분석이-필요한-이유" class="nav-link" data-scroll-target="#외식산업에서-이원배치-분산분석이-필요한-이유"><span class="header-section-number">5.1.4</span> 외식산업에서 이원배치 분산분석이 필요한 이유</a></li>
  <li><a href="#후속-실습을-위한-데이터셋-소개" id="toc-후속-실습을-위한-데이터셋-소개" class="nav-link" data-scroll-target="#후속-실습을-위한-데이터셋-소개"><span class="header-section-number">5.1.5</span> 후속 실습을 위한 데이터셋 소개</a></li>
  </ul></li>
  <li><a href="#외식산업에서의-적용-사례" id="toc-외식산업에서의-적용-사례" class="nav-link" data-scroll-target="#외식산업에서의-적용-사례"><span class="header-section-number">5.2</span> 외식산업에서의 적용 사례</a>
  <ul class="collapse">
  <li><a href="#데이터-분석은-결국-현장의-의사결정을-위해-존재한다" id="toc-데이터-분석은-결국-현장의-의사결정을-위해-존재한다" class="nav-link" data-scroll-target="#데이터-분석은-결국-현장의-의사결정을-위해-존재한다"><span class="header-section-number">5.2.1</span> 데이터 분석은 결국 현장의 의사결정을 위해 존재한다</a></li>
  <li><a href="#예제-1-요일과-매장유형에-따른-일매출-차이" id="toc-예제-1-요일과-매장유형에-따른-일매출-차이" class="nav-link" data-scroll-target="#예제-1-요일과-매장유형에-따른-일매출-차이"><span class="header-section-number">5.2.2</span> 예제 1: 요일과 매장유형에 따른 일매출 차이</a></li>
  <li><a href="#예제-2-메뉴-종류와-고객-연령대에-따른-만족도-차이" id="toc-예제-2-메뉴-종류와-고객-연령대에-따른-만족도-차이" class="nav-link" data-scroll-target="#예제-2-메뉴-종류와-고객-연령대에-따른-만족도-차이"><span class="header-section-number">5.2.3</span> 예제 2: 메뉴 종류와 고객 연령대에 따른 만족도 차이</a></li>
  <li><a href="#예제-3-프로모션-유형과-지점-위치에-따른-재방문율-변화" id="toc-예제-3-프로모션-유형과-지점-위치에-따른-재방문율-변화" class="nav-link" data-scroll-target="#예제-3-프로모션-유형과-지점-위치에-따른-재방문율-변화"><span class="header-section-number">5.2.4</span> 예제 3: 프로모션 유형과 지점 위치에 따른 재방문율 변화</a></li>
  <li><a href="#실습용-데이터-예시-생성-r-코드" id="toc-실습용-데이터-예시-생성-r-코드" class="nav-link" data-scroll-target="#실습용-데이터-예시-생성-r-코드"><span class="header-section-number">5.2.5</span> 실습용 데이터 예시 생성 (R 코드)</a></li>
  </ul></li>
  <li><a href="#이원배치-분산분석의-구조와-해석-방법" id="toc-이원배치-분산분석의-구조와-해석-방법" class="nav-link" data-scroll-target="#이원배치-분산분석의-구조와-해석-방법"><span class="header-section-number">5.3</span> 이원배치 분산분석의 구조와 해석 방법</a>
  <ul class="collapse">
  <li><a href="#분산을-세-부분으로-나누는-이유" id="toc-분산을-세-부분으로-나누는-이유" class="nav-link" data-scroll-target="#분산을-세-부분으로-나누는-이유"><span class="header-section-number">5.3.1</span> 분산을 세 부분으로 나누는 이유</a></li>
  <li><a href="#제곱합-자유도-평균제곱-분산분석의-세-기둥" id="toc-제곱합-자유도-평균제곱-분산분석의-세-기둥" class="nav-link" data-scroll-target="#제곱합-자유도-평균제곱-분산분석의-세-기둥"><span class="header-section-number">5.3.2</span> 제곱합, 자유도, 평균제곱: 분산분석의 세 기둥</a></li>
  <li><a href="#f-통계량과-유의확률p-value의-해석" id="toc-f-통계량과-유의확률p-value의-해석" class="nav-link" data-scroll-target="#f-통계량과-유의확률p-value의-해석"><span class="header-section-number">5.3.3</span> F-통계량과 유의확률(p-value)의 해석</a></li>
  <li><a href="#상호작용이-존재할-때의-해석상의-주의사항" id="toc-상호작용이-존재할-때의-해석상의-주의사항" class="nav-link" data-scroll-target="#상호작용이-존재할-때의-해석상의-주의사항"><span class="header-section-number">5.3.4</span> 상호작용이 존재할 때의 해석상의 주의사항</a></li>
  <li><a href="#실제-분석-결과의-의미와-실무적-함의" id="toc-실제-분석-결과의-의미와-실무적-함의" class="nav-link" data-scroll-target="#실제-분석-결과의-의미와-실무적-함의"><span class="header-section-number">5.3.5</span> 실제 분석 결과의 의미와 실무적 함의</a></li>
  </ul></li>
  <li><a href="#상호작용-효과-단순한-평균-차이로-설명되지-않는-현상" id="toc-상호작용-효과-단순한-평균-차이로-설명되지-않는-현상" class="nav-link" data-scroll-target="#상호작용-효과-단순한-평균-차이로-설명되지-않는-현상"><span class="header-section-number">5.4</span> 상호작용 효과: 단순한 평균 차이로 설명되지 않는 현상</a>
  <ul class="collapse">
  <li><a href="#평균의-함정-상호작용의-힘" id="toc-평균의-함정-상호작용의-힘" class="nav-link" data-scroll-target="#평균의-함정-상호작용의-힘"><span class="header-section-number">5.4.1</span> 평균의 함정, 상호작용의 힘</a></li>
  <li><a href="#예제-1-연령대와-요일에-따른-메뉴-선호도의-변화" id="toc-예제-1-연령대와-요일에-따른-메뉴-선호도의-변화" class="nav-link" data-scroll-target="#예제-1-연령대와-요일에-따른-메뉴-선호도의-변화"><span class="header-section-number">5.4.2</span> 예제 1: 연령대와 요일에 따른 메뉴 선호도의 변화</a></li>
  <li><a href="#예제-2-매장-위치와-프로모션-전략의-효과" id="toc-예제-2-매장-위치와-프로모션-전략의-효과" class="nav-link" data-scroll-target="#예제-2-매장-위치와-프로모션-전략의-효과"><span class="header-section-number">5.4.3</span> 예제 2: 매장 위치와 프로모션 전략의 효과</a></li>
  <li><a href="#상호작용-효과-해석-시의-핵심-주의사항" id="toc-상호작용-효과-해석-시의-핵심-주의사항" class="nav-link" data-scroll-target="#상호작용-효과-해석-시의-핵심-주의사항"><span class="header-section-number">5.4.4</span> 상호작용 효과 해석 시의 핵심 주의사항</a></li>
  </ul></li>
  <li><a href="#외식업-예제-데이터-분석" id="toc-외식업-예제-데이터-분석" class="nav-link" data-scroll-target="#외식업-예제-데이터-분석"><span class="header-section-number">5.5</span> 외식업 예제 데이터 분석</a>
  <ul class="collapse">
  <li><a href="#분석은-좋은-질문에서-시작된다" id="toc-분석은-좋은-질문에서-시작된다" class="nav-link" data-scroll-target="#분석은-좋은-질문에서-시작된다"><span class="header-section-number">5.5.1</span> 분석은 좋은 질문에서 시작된다</a></li>
  <li><a href="#실습-데이터-구조-설명" id="toc-실습-데이터-구조-설명" class="nav-link" data-scroll-target="#실습-데이터-구조-설명"><span class="header-section-number">5.5.2</span> 실습 데이터 구조 설명</a></li>
  <li><a href="#실습용-데이터-생성" id="toc-실습용-데이터-생성" class="nav-link" data-scroll-target="#실습용-데이터-생성"><span class="header-section-number">5.5.3</span> 실습용 데이터 생성</a></li>
  <li><a href="#기술통계-확인-분석-전에-반드시-점검할-것" id="toc-기술통계-확인-분석-전에-반드시-점검할-것" class="nav-link" data-scroll-target="#기술통계-확인-분석-전에-반드시-점검할-것"><span class="header-section-number">5.5.4</span> 기술통계 확인: 분석 전에 반드시 점검할 것</a></li>
  <li><a href="#이원배치-anova-분석-실행" id="toc-이원배치-anova-분석-실행" class="nav-link" data-scroll-target="#이원배치-anova-분석-실행"><span class="header-section-number">5.5.5</span> 이원배치 ANOVA 분석 실행</a></li>
  <li><a href="#상호작용-효과-시각화" id="toc-상호작용-효과-시각화" class="nav-link" data-scroll-target="#상호작용-효과-시각화"><span class="header-section-number">5.5.6</span> 상호작용 효과 시각화</a></li>
  <li><a href="#분석-결과의-해석과-의사결정" id="toc-분석-결과의-해석과-의사결정" class="nav-link" data-scroll-target="#분석-결과의-해석과-의사결정"><span class="header-section-number">5.5.7</span> 분석 결과의 해석과 의사결정</a></li>
  </ul></li>
  <li><a href="#실습-결과-해석과-전략적-의사결정" id="toc-실습-결과-해석과-전략적-의사결정" class="nav-link" data-scroll-target="#실습-결과-해석과-전략적-의사결정"><span class="header-section-number">5.6</span> 실습 결과 해석과 전략적 의사결정</a>
  <ul class="collapse">
  <li><a href="#유의하지-않은-결과에서-비즈니스-통찰을-얻는-법" id="toc-유의하지-않은-결과에서-비즈니스-통찰을-얻는-법" class="nav-link" data-scroll-target="#유의하지-않은-결과에서-비즈니스-통찰을-얻는-법"><span class="header-section-number">5.6.1</span> 유의하지 않은 결과에서 비즈니스 통찰을 얻는 법</a></li>
  <li><a href="#사례-시간대와-매장유형에-따른-고객당-매출-분석" id="toc-사례-시간대와-매장유형에-따른-고객당-매출-분석" class="nav-link" data-scroll-target="#사례-시간대와-매장유형에-따른-고객당-매출-분석"><span class="header-section-number">5.6.2</span> 사례: 시간대와 매장유형에 따른 고객당 매출 분석</a></li>
  <li><a href="#데이터-구조와-가정" id="toc-데이터-구조와-가정" class="nav-link" data-scroll-target="#데이터-구조와-가정"><span class="header-section-number">5.6.3</span> 데이터 구조와 가정</a></li>
  <li><a href="#데이터-생성" id="toc-데이터-생성" class="nav-link" data-scroll-target="#데이터-생성"><span class="header-section-number">5.6.4</span> 데이터 생성</a></li>
  <li><a href="#기술통계로-전반-구조-파악하기" id="toc-기술통계로-전반-구조-파악하기" class="nav-link" data-scroll-target="#기술통계로-전반-구조-파악하기"><span class="header-section-number">5.6.5</span> 기술통계로 전반 구조 파악하기</a></li>
  <li><a href="#분석-실행-및-결과-확인" id="toc-분석-실행-및-결과-확인" class="nav-link" data-scroll-target="#분석-실행-및-결과-확인"><span class="header-section-number">5.6.6</span> 분석 실행 및 결과 확인</a></li>
  <li><a href="#상호작용-시각화" id="toc-상호작용-시각화" class="nav-link" data-scroll-target="#상호작용-시각화"><span class="header-section-number">5.6.7</span> 상호작용 시각화</a></li>
  <li><a href="#전략적-해석" id="toc-전략적-해석" class="nav-link" data-scroll-target="#전략적-해석"><span class="header-section-number">5.6.8</span> 전략적 해석</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">이원배치 분산분석</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="이원배치-분산분석이란-무엇인가" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="이원배치-분산분석이란-무엇인가"><span class="header-section-number">5.1</span> 이원배치 분산분석이란 무엇인가?</h2>
<section id="복잡한-세상을-설명하는-새로운-도구" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="복잡한-세상을-설명하는-새로운-도구"><span class="header-section-number">5.1.1</span> 복잡한 세상을 설명하는 새로운 도구</h3>
<p>현실의 데이터는 단순하지 않다. 외식 프랜차이즈 본사에서 일매출에 영향을 미치는 요인을 분석하려 한다고 가정해보자. 매장의 <strong>운영 형태(직영점/가맹점)</strong> 과 <strong>요일(평일/주말)</strong> 이 매출에 영향을 주는지 알고 싶다면 어떻게 해야 할까? 만약 한 가지 요인만 분석한다면 중요한 정보를 놓칠 수 있다. 이때 사용하는 분석 기법이 바로 <strong>이원배치 분산분석(Two-Way ANOVA)</strong>이다. 이 방법은 두 개의 독립변수가 종속변수에 미치는 <strong>각각의 영향(주효과)</strong>과 <strong>그들이 결합했을 때의 상호작용 효과(Interaction Effect)</strong>까지 동시에 평가할 수 있다.</p>
</section>
<section id="단순한-anova와의-차이" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="단순한-anova와의-차이"><span class="header-section-number">5.1.2</span> 단순한 ANOVA와의 차이</h3>
<p>일원배치 분산분석(One-Way ANOVA)은 오직 하나의 요인이 종속변수에 미치는 영향을 분석하는 데 사용된다. 예를 들어 요일만을 기준으로 일매출 평균 차이를 비교한다면 일원배치 ANOVA로 충분하다. 하지만 요일뿐만 아니라 매장 유형도 고려해야 하고, 이 두 요인이 서로 어떤 방식으로 결합하여 매출에 영향을 미치는지 알고 싶다면, 일원배치 ANOVA로는 부족하다.</p>
<p>이원배치 ANOVA는 다음 세 가지를 동시에 추정한다:</p>
<p><strong>-</strong> 첫 번째 요인(예: 매장 유형)의 주효과 <br> <strong>-</strong> 두 번째 요인(예: 요일)의 주효과 <br> <strong>-</strong> 두 요인의 상호작용 효과 <br></p>
<p>현실 세계에서는 이 세 가지가 모두 중요한 의미를 갖는다. 예를 들어 직영점은 평일에 강세를 보이지만, 가맹점은 주말에 강세를 보이는 경우, 단순한 평균 비교로는 이를 알 수 없다.</p>
</section>
<section id="주효과와-상호작용-효과의-개념" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="주효과와-상호작용-효과의-개념"><span class="header-section-number">5.1.3</span> 주효과와 상호작용 효과의 개념</h3>
<p><strong>주효과(Main Effect)</strong>란 독립변수 하나가 종속변수에 미치는 평균적인 영향을 의미한다. 예를 들어 요일이 일매출에 미치는 주효과를 살펴보면, 매장 유형과 상관없이 단순히 평일과 주말 사이의 매출 차이를 의미한다.</p>
<p>반면에 <strong>상호작용 효과(Interaction Effect)</strong>는 두 독립변수가 결합될 때 생기는 새로운 효과를 의미한다. 직영점과 가맹점의 매출 차이가 요일에 따라 달라진다면, 즉 요인의 효과가 다른 요인의 수준에 따라 변한다면, 이때 상호작용이 존재한다고 본다. 실제 외식업에서는 이러한 상호작용이 매우 자주 발생한다.</p>
<p>예를 들어 아래 표는 평일과 주말에 따라 직영점과 가맹점의 일매출 평균을 정리한 것이다.</p>
<table class="table-striped table-hover table">
<colgroup>
<col style="width: 30%">
<col style="width: 35%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">매장 유형</th>
<th style="text-align: center;">평일 평균 매출</th>
<th style="text-align: center;">주말 평균 매출</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">직영점</td>
<td style="text-align: center;">2,000,000</td>
<td style="text-align: center;">2,200,000</td>
</tr>
<tr class="even">
<td style="text-align: center;">가맹점</td>
<td style="text-align: center;">1,500,000</td>
<td style="text-align: center;">2,300,000</td>
</tr>
</tbody>
</table>
<p>이 경우, 평일에는 직영점이 매출이 높지만 주말에는 가맹점이 더 높다. 이 차이는 단순한 주효과로 설명할 수 없고, 두 요인 간의 <strong>상호작용 효과</strong>가 존재한다고 해석할 수 있다.</p>
</section>
<section id="외식산업에서-이원배치-분산분석이-필요한-이유" class="level3" data-number="5.1.4">
<h3 data-number="5.1.4" class="anchored" data-anchor-id="외식산업에서-이원배치-분산분석이-필요한-이유"><span class="header-section-number">5.1.4</span> 외식산업에서 이원배치 분산분석이 필요한 이유</h3>
<p>외식산업은 복합적인 요인들이 얽혀 있는 산업이다. 매출, 만족도, 재방문 의도 등 대부분의 종속변수는 여러 요인의 영향을 동시에 받는다. 예를 들어 고객 만족도는 음식의 종류뿐만 아니라 방문 시간대와 고객 연령대에 따라 달라질 수 있다. 단순히 한 가지 요인만 고려해서는 고객의 행동을 설명하기 어렵다.</p>
<p>예를 들어 점심시간의 한식 선호도는 50대 이상에게서 높지만, 저녁에는 20대가 양식을 더 선호할 수 있다. 이처럼 복잡한 소비자 행동은 <strong>두 가지 이상의 요인이 결합하여 발생하는 패턴</strong>이기 때문에, 이를 해석할 수 있는 도구가 필요하다. 이원배치 분산분석은 이러한 복잡한 현실의 패턴을 이해하는 데 핵심적인 역할을 한다.</p>
</section>
<section id="후속-실습을-위한-데이터셋-소개" class="level3" data-number="5.1.5">
<h3 data-number="5.1.5" class="anchored" data-anchor-id="후속-실습을-위한-데이터셋-소개"><span class="header-section-number">5.1.5</span> 후속 실습을 위한 데이터셋 소개</h3>
<p>다음 실습에서는 실제 외식 프랜차이즈 데이터를 가정하여, 요일과 매장 유형이 일매출에 미치는 영향을 분석할 예정이다. 실습에 사용할 가상의 데이터는 다음과 같은 구조를 갖는다.</p>
<table class="table-striped table-hover table">
<thead>
<tr class="header">
<th style="text-align: center;">점포ID</th>
<th style="text-align: center;">요일</th>
<th style="text-align: center;">매장유형</th>
<th style="text-align: center;">일매출</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">A01</td>
<td style="text-align: center;">평일</td>
<td style="text-align: center;">직영점</td>
<td style="text-align: center;">2,050,000</td>
</tr>
<tr class="even">
<td style="text-align: center;">A02</td>
<td style="text-align: center;">주말</td>
<td style="text-align: center;">가맹점</td>
<td style="text-align: center;">2,300,000</td>
</tr>
<tr class="odd">
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
</tbody>
</table>
<p>이 데이터는 R에서 aov() 함수를 통해 분석할 수 있으며, 상호작용 플롯도 함께 그려볼 수 있다. 실제 분석과 실무 전략은 이후 장에서 다루게 된다.</p>
<p>다음 장에서는 외식산업에 적용된 다양한 사례를 바탕으로 이원배치 분산분석을 어떻게 활용할 수 있는지를 자세히 다룬다.</p>
</section>
</section>
<section id="외식산업에서의-적용-사례" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="외식산업에서의-적용-사례"><span class="header-section-number">5.2</span> 외식산업에서의 적용 사례</h2>
<section id="데이터-분석은-결국-현장의-의사결정을-위해-존재한다" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="데이터-분석은-결국-현장의-의사결정을-위해-존재한다"><span class="header-section-number">5.2.1</span> 데이터 분석은 결국 현장의 의사결정을 위해 존재한다</h3>
<p>데이터는 그 자체로 아무 말도 하지 않는다. 데이터가 진짜 말을 하기 시작하는 순간은 현장의 맥락 안에서 해석될 때다. 이원배치 분산분석이 쓸만한 분석 도구로 자리 잡는 이유는, 현실의 수많은 의사결정이 <strong>둘 이상의 요인에 의해 복합적으로 영향을 받기 때문</strong>이다.</p>
<p>단순히 “주말 매출이 높다”는 사실만으로는 충분하지 않다. 주말 매출이 높은 이유가 가맹점에만 해당되는지, 직영점에서도 동일한 패턴이 나타나는지, 혹은 두 매장 유형이 서로 다른 방향의 반응을 보이는지까지 파악해야 진짜 전략이 세워진다. 이러한 통찰을 제공하는 도구가 바로 이원배치 분산분석이다.</p>
</section>
<section id="예제-1-요일과-매장유형에-따른-일매출-차이" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="예제-1-요일과-매장유형에-따른-일매출-차이"><span class="header-section-number">5.2.2</span> 예제 1: 요일과 매장유형에 따른 일매출 차이</h3>
<p>외식 프랜차이즈 본사에서는 종종 다음과 같은 질문에 직면한다. “우리 직영점과 가맹점의 매출 차이는 단순한 위치 때문일까, 아니면 운영방식의 차이 때문일까?” 여기에 더해 “이 매출 차이는 평일과 주말에도 동일하게 유지되는가?”라는 의문이 따라붙는다.</p>
<p>예를 들어 다음과 같은 데이터가 있다고 가정하자.</p>
<table class="table-striped table-hover table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">요일</th>
<th style="text-align: center;">매장유형</th>
<th style="text-align: center;">평균 일매출 (원)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">평일</td>
<td style="text-align: center;">직영점</td>
<td style="text-align: center;">2,000,000</td>
</tr>
<tr class="even">
<td style="text-align: center;">주말</td>
<td style="text-align: center;">직영점</td>
<td style="text-align: center;">2,300,000</td>
</tr>
<tr class="odd">
<td style="text-align: center;">평일</td>
<td style="text-align: center;">가맹점</td>
<td style="text-align: center;">1,700,000</td>
</tr>
<tr class="even">
<td style="text-align: center;">주말</td>
<td style="text-align: center;">가맹점</td>
<td style="text-align: center;">2,500,000</td>
</tr>
</tbody>
</table>
<p>표만 봐도 가맹점은 주말에 큰 매출 상승을 보이고 있다. 반면 직영점은 주중과 주말의 차이가 비교적 적다. 이 경우 요일과 매장유형 사이에 <strong>상호작용 효과가 존재</strong>한다고 해석할 수 있다. 본사는 이 정보를 바탕으로 가맹점의 주말 프로모션을 더 강화할 전략을 세울 수 있다.</p>
</section>
<section id="예제-2-메뉴-종류와-고객-연령대에-따른-만족도-차이" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="예제-2-메뉴-종류와-고객-연령대에-따른-만족도-차이"><span class="header-section-number">5.2.3</span> 예제 2: 메뉴 종류와 고객 연령대에 따른 만족도 차이</h3>
<p>만족도 조사는 단순히 평균만 비교해서 끝나는 것이 아니다. 특정 연령층이 특정 메뉴를 어떻게 인식하는지를 함께 살펴보는 것이 핵심이다. 예를 들어 20대는 양식 메뉴에 높은 점수를 주지만, 50대 이상은 한식에 더 만족한다면, 전체 평균만으로는 이 미묘한 차이를 파악할 수 없다.</p>
<p>다음은 가상의 만족도 데이터 예시이다.</p>
<table class="table-striped table-hover table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">메뉴종류</th>
<th style="text-align: center;">연령대</th>
<th style="text-align: center;">평균 만족도 (5점 만점)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">한식</td>
<td style="text-align: center;">20대</td>
<td style="text-align: center;">3.8</td>
</tr>
<tr class="even">
<td style="text-align: center;">한식</td>
<td style="text-align: center;">50대</td>
<td style="text-align: center;">4.5</td>
</tr>
<tr class="odd">
<td style="text-align: center;">양식</td>
<td style="text-align: center;">20대</td>
<td style="text-align: center;">4.6</td>
</tr>
<tr class="even">
<td style="text-align: center;">양식</td>
<td style="text-align: center;">50대</td>
<td style="text-align: center;">3.9</td>
</tr>
</tbody>
</table>
<p>이 경우 연령대와 메뉴 종류 간의 상호작용 효과가 존재한다. 단순히 연령대별 평균 만족도나 메뉴별 만족도만 봐서는 이 차이를 놓치기 쉽다. 실제 마케팅 전략에서는 이 분석 결과를 활용해 연령대별 선호 메뉴 중심으로 점심 메뉴판을 재구성하거나, 연령 맞춤형 추천 메뉴를 제시할 수 있다.</p>
</section>
<section id="예제-3-프로모션-유형과-지점-위치에-따른-재방문율-변화" class="level3" data-number="5.2.4">
<h3 data-number="5.2.4" class="anchored" data-anchor-id="예제-3-프로모션-유형과-지점-위치에-따른-재방문율-변화"><span class="header-section-number">5.2.4</span> 예제 3: 프로모션 유형과 지점 위치에 따른 재방문율 변화</h3>
<p>마지막 사례는 지점의 위치와 마케팅 전략의 상호작용에 관한 것이다. 많은 외식 브랜드가 온라인 쿠폰, 할인 행사, 멤버십 적립 등 다양한 프로모션을 진행하지만, 모든 지역에서 같은 효과가 나는 것은 아니다.</p>
<p>예를 들어 도심의 소비자는 할인 쿠폰에 즉각 반응하지만, 외곽 지역의 소비자는 정기 고객 할인 같은 <strong>지속성 기반 혜택</strong>에 더 민감할 수 있다.</p>
<table class="table-striped table-hover table">
<colgroup>
<col style="width: 30%">
<col style="width: 35%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">프로모션</th>
<th style="text-align: center;">위치</th>
<th style="text-align: center;">재방문율 (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">쿠폰</td>
<td style="text-align: center;">도심</td>
<td style="text-align: center;">55</td>
</tr>
<tr class="even">
<td style="text-align: center;">쿠폰</td>
<td style="text-align: center;">외곽</td>
<td style="text-align: center;">42</td>
</tr>
<tr class="odd">
<td style="text-align: center;">멤버십</td>
<td style="text-align: center;">도심</td>
<td style="text-align: center;">48</td>
</tr>
<tr class="even">
<td style="text-align: center;">멤버십</td>
<td style="text-align: center;">외곽</td>
<td style="text-align: center;">60</td>
</tr>
</tbody>
</table>
<p>이 경우 프로모션 유형과 지점 위치 간의 교호작용이 존재한다. 단순히 프로모션의 효과를 전체 평균으로만 분석하면 실제로 전략을 오히려 역행하게 될 수 있다. 프랜차이즈 본사는 이 결과를 바탕으로 외곽 점포에는 멤버십 중심의 장기 혜택을, 도심 점포에는 단기 할인 쿠폰을 중심으로 구성할 수 있다.</p>
</section>
<section id="실습용-데이터-예시-생성-r-코드" class="level3" data-number="5.2.5">
<h3 data-number="5.2.5" class="anchored" data-anchor-id="실습용-데이터-예시-생성-r-코드"><span class="header-section-number">5.2.5</span> 실습용 데이터 예시 생성 (R 코드)</h3>
<p>이제 위에서 설명한 세 가지 사례 중 <strong>요일과 매장유형에 따른 일매출 분석</strong>을 위한 데이터셋을 먼저 생성한다. 이는 다음 실습에서 R을 통해 직접 이원배치 ANOVA 분석을 수행하는 데 사용된다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>store_type <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"직영점"</span>, <span class="st">"가맹점"</span>), <span class="at">each =</span> n<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>day <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"평일"</span>, <span class="st">"주말"</span>), <span class="at">times =</span> n<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>sales <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(n, <span class="at">mean =</span> <span class="dv">2000000</span>, <span class="at">sd =</span> <span class="dv">300000</span>) <span class="sc">+</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>               <span class="fu">ifelse</span>(store_type <span class="sc">==</span> <span class="st">"직영점"</span>, <span class="dv">200000</span>, <span class="sc">-</span><span class="dv">100000</span>) <span class="sc">+</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>               <span class="fu">ifelse</span>(day <span class="sc">==</span> <span class="st">"주말"</span>, <span class="dv">150000</span>, <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>               <span class="fu">ifelse</span>(store_type <span class="sc">==</span> <span class="st">"가맹점"</span> <span class="sc">&amp;</span> day <span class="sc">==</span> <span class="st">"주말"</span>, <span class="dv">200000</span>, <span class="dv">0</span>))</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(점포<span class="at">ID =</span> <span class="fu">paste0</span>(<span class="st">"S"</span>, <span class="fu">sprintf</span>(<span class="st">"%03d"</span>, <span class="dv">1</span><span class="sc">:</span>n)),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                 매장유형 <span class="ot">=</span> store_type,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                 요일 <span class="ot">=</span> day,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                 일매출 <span class="ot">=</span> sales)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(df, <span class="st">"ch5_data1.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 코드는 100개의 점포에 대한 가상의 일매출 데이터를 생성한다. 매장 유형과 요일에 따라 평균 매출이 다르게 설정되어 있으며, 이를 통해 이원배치 분산분석을 수행할 수 있다. 생성된 데이터는 <code>ch5_data1.csv</code> 파일로 저장된다.</p>
</section>
</section>
<section id="이원배치-분산분석의-구조와-해석-방법" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="이원배치-분산분석의-구조와-해석-방법"><span class="header-section-number">5.3</span> 이원배치 분산분석의 구조와 해석 방법</h2>
<section id="분산을-세-부분으로-나누는-이유" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="분산을-세-부분으로-나누는-이유"><span class="header-section-number">5.3.1</span> 분산을 세 부분으로 나누는 이유</h3>
<p>이원배치 분산분석은 데이터를 단순히 그룹별로 비교하는 수준을 넘어서, <strong>데이터의 총 분산(Total Variance)을 세 가지 구성 요소로 분해</strong>한다는 점에서 강력한 분석도구다. 전체 데이터의 변동은 다음 세 가지로 나뉜다.</p>
<p><strong>1. 요인 A에 의한 분산 (예: 매장유형에 따른 매출 차이)</strong> <br> <strong>2. 요인 B에 의한 분산 (예: 요일에 따른 매출 차이)</strong> <br> <strong>3. A와 B의 상호작용(Interaction)에 의한 분산</strong></p>
<p>마지막으로, 측정 오차나 설명되지 않는 요인의 영향을 포함하는 <strong>오차항(Error)</strong> 이 존재한다. 이 네 가지가 합쳐져서 전체 데이터의 분산을 설명하게 된다. 앞에서 했던 설명의 연장선상에서 보자면, 여기서 말하는 <strong>오차항(Error)</strong>이 바로 그룹 내 분산 (Within Variance)이다. 통계 책마다 서로 조금씩 다른 표현을 사용하기는 하지만 결국 기본 개념은 같은 것이다.</p>
<p>위의 <strong>요인 A에 의한 분산</strong>과 <strong>요인 B에 의한 분산</strong>은 앞에서 공부한 일원배치 분산분석의 <strong>그룹 간 분산 (Between Variance)</strong>이다. 다만, 독립변수가 두 개이기 때문에, 이렇게 두 개의 분산이 된 것이다. 이 두 요인에 의한 효과를 우리는 주효과 (Main Effect)라고 부른다. 그리고, 여기서 말하는 상호작용이란 요인 A의 종속변수에 대한 효과가 요인 B에 의해서 변화가 생기거나, 반대로 요인 B의 종속변수에 대한 효과가 요인 A에 의해서 변화할 경우 우리는 이를 상호작용이라고 부른다.</p>
<p>혹시 이 부분이 어려운 학생은 사전학습의 <a href="https://who4u78.github.io/book2/chapter1.html#main-effect-%EC%A3%BC%ED%9A%A8%EA%B3%BC-interaction-effect%EC%83%81%ED%98%B8%EC%9E%91%EC%9A%A9">다음 링크</a>를 이용하여 다시 공부하기 바란다. 상호작용에 대한 이해는 매우 중요하다. 사전학습용 보조교재를 자세하게 읽고 이해하길 바란다.</p>
<p>이 분석은 단순히 집단 간 평균의 차이를 비교하는 것이 아니라, 어떤 요인이 얼마나 데이터를 설명하는지를 수량적으로 파악하는 데 초점이 있다. 사실상 우리가 하는 통계분석은 기본적으로 종속변수의 분산을 독립변수로 얼마나 잘 설명했느냐의 문제이기 때문이다.</p>
</section>
<section id="제곱합-자유도-평균제곱-분산분석의-세-기둥" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="제곱합-자유도-평균제곱-분산분석의-세-기둥"><span class="header-section-number">5.3.2</span> 제곱합, 자유도, 평균제곱: 분산분석의 세 기둥</h3>
<p>각 요인이 데이터를 얼마나 설명하는지를 수치로 나타내기 위해서는 <strong>제곱합(Sum of Squares, SS)</strong> 을 계산해야 한다. 제곱합은 각 관측값과 전체 평균 혹은 각 요인 평균 간의 차이를 제곱하여 합한 값이다.</p>
<p>다음은 외식업 예제를 바탕으로 요인별 제곱합의 개념을 설명한다.</p>
<p><strong>예시</strong>: 매장유형(직영/가맹)과 요일(평일/주말)에 따라 일매출이 측정된 데이터가 있다고 가정한다.</p>
<table class="table-striped table-hover table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">매장유형</th>
<th style="text-align: center;">요일</th>
<th style="text-align: center;">평균 매출</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">직영점</td>
<td style="text-align: center;">평일</td>
<td style="text-align: center;">2,000,000</td>
</tr>
<tr class="even">
<td style="text-align: center;">직영점</td>
<td style="text-align: center;">주말</td>
<td style="text-align: center;">2,300,000</td>
</tr>
<tr class="odd">
<td style="text-align: center;">가맹점</td>
<td style="text-align: center;">평일</td>
<td style="text-align: center;">1,700,000</td>
</tr>
<tr class="even">
<td style="text-align: center;">가맹점</td>
<td style="text-align: center;">주말</td>
<td style="text-align: center;">2,500,000</td>
</tr>
</tbody>
</table>
<p>이 경우,</p>
<p><strong>- 요인 A(매장유형)에 의한 제곱합: 직영점 vs.&nbsp;가맹점 간 평균 매출의 차이에서 비롯</strong> <br> <strong>- 요인 B(요일)에 의한 제곱합: 평일 vs.&nbsp;주말 간 평균 매출 차이에서 비롯</strong> <br> <strong>- 상호작용 제곱합: 특정 조합(예: 가맹점-주말)에서 유난히 높거나 낮은 매출이 나타나는 경우, 평균값의 단순 차이로 설명되지 않는 변동</strong></p>
<p>각 제곱합에는 그에 해당하는 <strong>자유도(df)</strong> 가 존재한다. 요인이 두 수준이라면 자유도는 1이다. (그룹 개수 - 1)</p>
<p><strong>-</strong> <span class="math inline">\(\; df_A = a - 1 \; (a: \text{요인 A 수준 수})\)</span> <br> <strong>-</strong> <span class="math inline">\(\; df_B = b - 1 \; (b: \text{요인 B 수준 수})\)</span> <br> <strong>-</strong> <span class="math inline">\(\; df_{AB} = (a - 1)(b - 1)\)</span> <br> <strong>-</strong> <span class="math inline">\(\; df_{Error} = N - ab \; (N: \text{전체 관측치 수})\)</span> <br></p>
<p><strong>평균제곱(Mean Square)</strong> 은 각 제곱합을 해당 자유도로 나눈 값이다. 이 부분이 앞에서 이야기 했듯이, 바로 분산이다.</p>
<p><strong>-</strong> <span class="math inline">\(\; MS_A = SS_A \div df_A\)</span> <br> <strong>-</strong> <span class="math inline">\(\; MS_B = SS_B \div df_B\)</span> <br> <strong>-</strong> <span class="math inline">\(\; MS_{AB} = SS_{AB} \div df_{AB}\)</span> <br> <strong>-</strong> <span class="math inline">\(\; MS_{Error} = SS_{Error} \div df_{Error}\)</span> <br></p>
<p>이 과정을 거쳐 각 요인의 평균제곱을 오차 평균제곱과 비교한 <strong>F-통계량</strong> 을 계산할 수 있게 된다.</p>
<p>여기서 오해하면 안되는 것은 기준이 되는 그룹 내 분산 (Within Variance)는 단 한 개만 있으면 된다는 점이다. 그룹 간 분산 (Between Variance)가 세 개라서 그룹 내 분산 (Within Variance)도 세 개가 필요하다고 생각한다면 이는 큰 오해이다. 왜냐하면, 그룹 내 분산 (Within Variance)의 필요성은 그룹 간 분산 (Between Variance)가 얼마나 커야 큰 것인지, 혹은 얼마나 작아야 작은 것인지 판단하기 위한 비교 대상이므로 비교 대상은 고정되어 있어야 기준값으로서 역할을 할 수 있기 때문에 한 개만 있으면 되는 것이다.</p>
</section>
<section id="f-통계량과-유의확률p-value의-해석" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="f-통계량과-유의확률p-value의-해석"><span class="header-section-number">5.3.3</span> F-통계량과 유의확률(p-value)의 해석</h3>
<p>이원배치 분산분석의 핵심은 각 요인이 통계적으로 유의미한 영향을 미치는지를 <strong>F-통계량</strong>과 <strong>p-value</strong>를 통해 검증하는 데 있다.</p>
<p>F-통계량은 다음과 같이 계산된다.</p>
<p><strong>-</strong> <span class="math inline">\(\; F_A = MS_A \div MS_{Error}\)</span> <br> <strong>-</strong> <span class="math inline">\(\; F_B = MS_B \div MS_{Error}\)</span> <br> <strong>-</strong> <span class="math inline">\(\; F_{AB} = MS_{AB} \div MS_{Error}\)</span> <br></p>
<p>각 F값은 해당 요인이 종속변수의 분산에 기여하는 비율을 나타낸다. 이 값이 클수록, 해당 요인의 효과가 무작위 변동에 비해 크다는 것을 의미한다. 각 F값에 대한 p-value를 확인하면, 통계적으로 유의한지 여부를 판별할 수 있다. 일반적으로 p &lt; 0.05면 해당 요인의 효과가 유의미하다고 판단한다.</p>
<p>R에서 다음과 같이 이원배치 분산분석을 수행한다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 불러오기</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>exdata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/ch5_data1.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 이원배치 분산분석</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">aov</span>(일매출 <span class="sc">~</span> 매장유형 <span class="sc">*</span> 요일, <span class="at">data =</span> exdata)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              Df    Sum Sq   Mean Sq F value   Pr(&gt;F)    
매장유형       1 6.922e+11 6.922e+11   9.001  0.00344 ** 
요일           1 1.415e+12 1.415e+12  18.405 4.26e-05 ***
매장유형:요일  1 3.558e+11 3.558e+11   4.627  0.03399 *  
Residuals     96 7.383e+12 7.691e+10                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>결과 테이블은 다음과 같은 구조를 갖는다.</p>
<table class="table-striped table-hover table">
<thead>
<tr class="header">
<th style="text-align: center;">Source</th>
<th style="text-align: center;">Df</th>
<th style="text-align: center;">Sum Sq</th>
<th style="text-align: center;">Mean Sq</th>
<th style="text-align: center;">F value</th>
<th style="text-align: center;">Pr(&gt;F)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">매장유형</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
<tr class="even">
<td style="text-align: center;">요일</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
<tr class="odd">
<td style="text-align: center;">매장유형:요일</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
<tr class="even">
<td style="text-align: center;">Residuals</td>
<td style="text-align: center;">N-4</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p>여기서 매장유형:요일의 항목이 상호작용 효과를 나타낸다.</p>
</section>
<section id="상호작용이-존재할-때의-해석상의-주의사항" class="level3" data-number="5.3.4">
<h3 data-number="5.3.4" class="anchored" data-anchor-id="상호작용이-존재할-때의-해석상의-주의사항"><span class="header-section-number">5.3.4</span> 상호작용이 존재할 때의 해석상의 주의사항</h3>
<p>상호작용 효과가 통계적으로 유의미할 경우, 주효과만 해석하는 것은 위험하다. 상호작용이 존재한다는 것은 한 요인의 효과가 다른 요인의 수준에 따라 달라진다는 의미이기 때문이다.</p>
<p>예를 들어 가맹점은 평일에 낮은 매출을 보이지만, 주말에는 직영점을 뛰어넘는 매출을 보인다면, 단순히 “직영점이 더 매출이 높다”는 해석은 잘못된 결론이다. 이 경우 해석은 다음과 같이 구성되어야 한다.</p>
<p><strong>-</strong> 요일에 따른 매출 차이는 매장유형에 따라 달라진다 <br> <strong>-</strong> 주말에는 가맹점이 더 높은 매출을 기록하지만, 평일에는 직영점이 더 높다 <br> <strong>-</strong> 두 요인이 결합될 때 나타나는 효과는 독립적인 주효과로 설명할 수 없다 <br></p>
<p>R에서는 interaction.plot() 함수를 활용하여 시각적으로 교호작용을 탐색할 수 있다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(exdata<span class="sc">$</span>요일, exdata<span class="sc">$</span>매장유형, exdata<span class="sc">$</span>일매출,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">legend =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Chapter5_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>이 그래프에서 두 선이 서로 평행하지 않다면, 상호작용이 존재한다고 판단할 수 있다. 특히 선이 서로 교차하거나 벌어지는 형태라면 그 효과는 더 크다고 해석할 수 있다.</p>
</section>
<section id="실제-분석-결과의-의미와-실무적-함의" class="level3" data-number="5.3.5">
<h3 data-number="5.3.5" class="anchored" data-anchor-id="실제-분석-결과의-의미와-실무적-함의"><span class="header-section-number">5.3.5</span> 실제 분석 결과의 의미와 실무적 함의</h3>
<p><strong>-</strong> 분석 결과, 매장유형, 요일, 매장유형:요일 세 항목이 모두 유의하다면, 본사는 다음과 같은 전략을 세워야 한다. <br> <strong>-</strong> 직영점은 평일 매출이 강하므로 점심 메뉴 중심의 마케팅에 집중 <br> <strong>-</strong> 가맹점은 주말 매출이 강하므로 주말 타겟 이벤트 강화 <br> <strong>-</strong> 전체 매출을 일괄적으로 비교하지 말고, 조건별 맞춤 전략 수립 <br></p>
<p>단순한 평균 비교에 비해 이원배치 분산분석은 정교하고 복합적인 의사결정을 가능하게 하는 분석 도구다. 외식산업과 같이 환경과 고객군이 다양하게 얽힌 분야에서는 특히 강력한 통찰을 제공한다.</p>
</section>
</section>
<section id="상호작용-효과-단순한-평균-차이로-설명되지-않는-현상" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="상호작용-효과-단순한-평균-차이로-설명되지-않는-현상"><span class="header-section-number">5.4</span> 상호작용 효과: 단순한 평균 차이로 설명되지 않는 현상</h2>
<section id="평균의-함정-상호작용의-힘" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="평균의-함정-상호작용의-힘"><span class="header-section-number">5.4.1</span> 평균의 함정, 상호작용의 힘</h3>
<p>많은 학생들이 데이터 분석을 배울 때 평균 비교를 가장 먼저 접한다. 메뉴별 만족도, 요일별 매출, 지역별 재방문율 등을 평균으로 비교하면 전반적인 차이는 파악할 수 있다. 하지만 현실은 평균보다 복잡하다. 두 개의 요인이 <strong>함께 작용할 때</strong>, 개별적으로는 나타나지 않던 패턴이 드러나는 경우가 많다. 이러한 현상이 바로 <strong>상호작용 효과(Interaction Effect)</strong>다.</p>
<p>단순한 주효과는 요인 A 또는 요인 B가 종속변수에 미치는 <strong>독립적인 평균 영향</strong>을 의미한다. 반면 상호작용은 요인 A의 효과가 요인 B의 수준에 따라 <strong>달라지는 패턴</strong>을 설명한다. 실제 외식업의 마케팅, 메뉴 전략, 매장 운영 등에서는 이 상호작용 효과가 의사결정의 핵심이 되는 경우가 많다.</p>
</section>
<section id="예제-1-연령대와-요일에-따른-메뉴-선호도의-변화" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="예제-1-연령대와-요일에-따른-메뉴-선호도의-변화"><span class="header-section-number">5.4.2</span> 예제 1: 연령대와 요일에 따른 메뉴 선호도의 변화</h3>
<p>한 프랜차이즈에서 메뉴 선호도를 조사한 결과, 평일과 주말에 따라 고객 연령대별 선택 패턴이 달라지는 흥미로운 결과가 나타났다. 50대 이상은 평일에는 전통 한식을 압도적으로 선호하지만, 주말에는 손주들과 외식을 하며 양식을 선택하는 비율이 높아졌다. 반대로 20대는 평일과 주말 모두에서 일식이나 양식을 선호했지만, 평일에는 간편식 위주로, 주말에는 브랜드 레스토랑 메뉴를 더 선택했다.</p>
<p>이 경우 ’연령대’와 ’요일’이라는 두 요인은 각각 선호 메뉴에 영향을 주지만, <strong>두 요인이 결합되었을 때 나타나는 소비행동은 단순 평균 차이로는 설명할 수 없다</strong>.</p>
<table class="table-striped table-hover table">
<thead>
<tr class="header">
<th style="text-align: center;">연령대</th>
<th style="text-align: center;">요일</th>
<th style="text-align: center;">한식 선호도(%)</th>
<th style="text-align: center;">양식 선호도(%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">20대</td>
<td style="text-align: center;">평일</td>
<td style="text-align: center;">25</td>
<td style="text-align: center;">60</td>
</tr>
<tr class="even">
<td style="text-align: center;">20대</td>
<td style="text-align: center;">주말</td>
<td style="text-align: center;">20</td>
<td style="text-align: center;">65</td>
</tr>
<tr class="odd">
<td style="text-align: center;">50대</td>
<td style="text-align: center;">평일</td>
<td style="text-align: center;">70</td>
<td style="text-align: center;">25</td>
</tr>
<tr class="even">
<td style="text-align: center;">50대</td>
<td style="text-align: center;">주말</td>
<td style="text-align: center;">40</td>
<td style="text-align: center;">50</td>
</tr>
</tbody>
</table>
<p>이 결과를 보면 50대의 양식 선호도는 주말에 크게 증가한다. 반면 20대는 주말이라고 해서 큰 변화가 없다. 이처럼 <strong>한 요인의 효과가 다른 요인에 따라 변화하는 경우</strong>가 상호작용이다.</p>
<p>R을 사용하면 이런 효과를 시각화할 수 있다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 가상의 데이터 생성</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"20대"</span>, <span class="st">"50대"</span>), <span class="at">each =</span> <span class="dv">40</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>day <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"평일"</span>, <span class="st">"주말"</span>), <span class="at">each =</span> <span class="dv">20</span>), <span class="dv">2</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>preference <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">60</span>, <span class="at">sd =</span> <span class="dv">5</span>),  <span class="co"># 20대 평일</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">65</span>, <span class="at">sd =</span> <span class="dv">5</span>),  <span class="co"># 20대 주말</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">25</span>, <span class="at">sd =</span> <span class="dv">5</span>),  <span class="co"># 50대 평일</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">50</span>, <span class="at">sd =</span> <span class="dv">5</span>))  <span class="co"># 50대 주말</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>menu_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(연령대 <span class="ot">=</span> age,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                      요일 <span class="ot">=</span> day,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                      양식선호도 <span class="ot">=</span> preference)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(menu_df<span class="sc">$</span>요일, menu_df<span class="sc">$</span>연령대, menu_df<span class="sc">$</span>양식선호도,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">ylab =</span> <span class="st">"양식 선호도"</span>, <span class="at">xlab =</span> <span class="st">"요일"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Chapter5_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>그래프에서 선이 서로 교차하거나 벌어진다면 상호작용이 존재하는 것이다. 이 경우 50대의 경우 주말에 선호도가 확연히 상승하여 상호작용이 강하게 나타난다.</p>
</section>
<section id="예제-2-매장-위치와-프로모션-전략의-효과" class="level3" data-number="5.4.3">
<h3 data-number="5.4.3" class="anchored" data-anchor-id="예제-2-매장-위치와-프로모션-전략의-효과"><span class="header-section-number">5.4.3</span> 예제 2: 매장 위치와 프로모션 전략의 효과</h3>
<p>다른 예로, 할인 프로모션을 적용했을 때 도심과 비도심 매장에서 서로 다른 반응이 나타나는 경우를 생각해보자. 도심 점포에서는 즉각적인 반응이 나타나지만, 비도심 매장에서는 오히려 평소보다 매출이 줄어드는 경우도 있다. 고객이 평소에는 정가로 구매하던 상품을 할인에만 반응하게 되어, 비도심 매장에서는 할인 기간 외에는 매출이 감소하는 부작용이 생긴 것이다.</p>
<table class="table-striped table-hover table">
<thead>
<tr class="header">
<th style="text-align: center;">매장 위치</th>
<th style="text-align: center;">프로모션</th>
<th style="text-align: center;">재방문율(%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">도심</td>
<td style="text-align: center;">없음</td>
<td style="text-align: center;">45</td>
</tr>
<tr class="even">
<td style="text-align: center;">도심</td>
<td style="text-align: center;">있음</td>
<td style="text-align: center;">60</td>
</tr>
<tr class="odd">
<td style="text-align: center;">비도심</td>
<td style="text-align: center;">없음</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: center;">비도심</td>
<td style="text-align: center;">있음</td>
<td style="text-align: center;">40</td>
</tr>
</tbody>
</table>
<p>여기서 주목할 점은 프로모션의 효과 방향이 위치에 따라 반대라는 것이다. 도심에서는 긍정적 효과, 비도심에서는 부정적 효과가 나타난다. 이런 경우, 단순히 “할인은 효과가 있다” 또는 “도심이 더 성과가 좋다”는 식의 결론은 오류를 유발할 수 있다. 의사결정은 반드시 상호작용까지 고려해야 한다.</p>
<p>다음은 이 데이터를 기반으로 한 R 시각화 코드이다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>location <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"도심"</span>, <span class="st">"비도심"</span>), <span class="at">each =</span> <span class="dv">40</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>promo <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"없음"</span>, <span class="st">"있음"</span>), <span class="at">each =</span> <span class="dv">20</span>), <span class="dv">2</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>visit_rate <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">45</span>, <span class="at">sd =</span> <span class="dv">5</span>),   <span class="co"># 도심-없음</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">60</span>, <span class="at">sd =</span> <span class="dv">5</span>),   <span class="co"># 도심-있음</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">50</span>, <span class="at">sd =</span> <span class="dv">5</span>),   <span class="co"># 비도심-없음</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">40</span>, <span class="at">sd =</span> <span class="dv">5</span>))   <span class="co"># 비도심-있음</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>promo_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(지점위치 <span class="ot">=</span> location,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>                       프로모션 <span class="ot">=</span> promo,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                       재방문율 <span class="ot">=</span> visit_rate)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(promo_df<span class="sc">$</span>프로모션, promo_df<span class="sc">$</span>지점위치, promo_df<span class="sc">$</span>재방문율,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"darkgreen"</span>), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">ylab =</span> <span class="st">"재방문율"</span>, <span class="at">xlab =</span> <span class="st">"프로모션"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Chapter5_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>이 그래프에서 도심과 비도심의 선이 반대 방향으로 움직이면 상호작용이 강력하다는 뜻이다. 마케팅 전략을 지역 특성에 맞게 조정해야 한다는 시사점을 준다.</p>
</section>
<section id="상호작용-효과-해석-시의-핵심-주의사항" class="level3" data-number="5.4.4">
<h3 data-number="5.4.4" class="anchored" data-anchor-id="상호작용-효과-해석-시의-핵심-주의사항"><span class="header-section-number">5.4.4</span> 상호작용 효과 해석 시의 핵심 주의사항</h3>
<p>상호작용이 존재하면 주효과만 해석해서는 안 된다. 예를 들어 “프로모션이 재방문율을 증가시킨다”는 결론은 일부 지역에서만 유효할 수 있다. 상호작용 효과가 유의미하게 나타났다면, 다음 세 가지를 반드시 점검해야 한다.</p>
<p><strong>1.</strong> 교차하는 그래프 패턴이 있는가? <br> <strong>2.</strong> 요인의 조합 중 유독 특이한 패턴이 있는가? <br> <strong>3.</strong> 주효과 해석이 오히려 왜곡된 결론을 유도할 가능성은 없는가? <br></p>
<p>상호작용은 단지 통계적 개념이 아니라, <strong>복잡한 현실의 맥락</strong>을 읽는 눈을 기르는 핵심 도구다. 외식산업처럼 고객군, 지역, 시간대, 메뉴구성이 복합적으로 작용하는 분야에서는, 상호작용을 이해하지 못하면 전략이 실패할 확률이 매우 높다.</p>
</section>
</section>
<section id="외식업-예제-데이터-분석" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="외식업-예제-데이터-분석"><span class="header-section-number">5.5</span> 외식업 예제 데이터 분석</h2>
<section id="분석은-좋은-질문에서-시작된다" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="분석은-좋은-질문에서-시작된다"><span class="header-section-number">5.5.1</span> 분석은 좋은 질문에서 시작된다</h3>
<p>모든 분석은 단순한 숫자 나열이 아니라, <strong>경영 현장에서 실제로 발생하는 문제를 해결하려는 질문</strong>에서 시작된다. 이번 장에서는 외식 프랜차이즈 기업의 지점 데이터를 바탕으로 이원배치 분산분석을 실습한다. 매장유형과 요일이라는 두 가지 요인이 일매출에 어떤 영향을 미치는지 분석하고, 그 결과가 <strong>실제 의사결정에 어떤 의미를 갖는지 해석하는 훈련</strong>을 수행한다.</p>
<p>데이터는 총 500개의 관측값으로 구성되며, 실제 외식업 매장의 주간 매출 데이터를 기반으로 가상의 시나리오를 설계하였다. 분석 전에는 반드시 <strong>기술통계부터 확인</strong>하고 변수들의 분포를 파악하는 습관을 가져야 한다. 데이터는 경영현장의 압축된 현실이기 때문에, 무작정 분석을 시작하면 중요한 맥락을 놓치게 된다.</p>
</section>
<section id="실습-데이터-구조-설명" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="실습-데이터-구조-설명"><span class="header-section-number">5.5.2</span> 실습 데이터 구조 설명</h3>
<p>분석에 사용할 데이터는 다음과 같은 구조를 갖는다.</p>
<table class="table-striped table-hover table">
<thead>
<tr class="header">
<th style="text-align: center;">변수명</th>
<th style="text-align: left;">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">점포ID</td>
<td style="text-align: left;">지점 고유 식별자</td>
</tr>
<tr class="even">
<td style="text-align: center;">매장유형</td>
<td style="text-align: left;">직영점 또는 가맹점</td>
</tr>
<tr class="odd">
<td style="text-align: center;">요일</td>
<td style="text-align: left;">평일 또는 주말</td>
</tr>
<tr class="even">
<td style="text-align: center;">일매출</td>
<td style="text-align: left;">해당 날짜의 총 매출 (단위: 원)</td>
</tr>
</tbody>
</table>
<p>실제 외식기업에서는 매장별, 요일별 매출 패턴을 분석하여 인력 배치, 프로모션, 메뉴 운영 전략을 수립한다. 따라서 본 실습의 목적은 단순히 통계적으로 유의한지를 판단하는 데에 있지 않다. 분석을 통해 <strong>정책적, 전략적 시사점을 도출하고 행동계획으로 연결</strong>하는 것이 목표다.</p>
</section>
<section id="실습용-데이터-생성" class="level3" data-number="5.5.3">
<h3 data-number="5.5.3" class="anchored" data-anchor-id="실습용-데이터-생성"><span class="header-section-number">5.5.3</span> 실습용 데이터 생성</h3>
<p>다음은 실습에 사용할 500개 이상의 관측값을 생성하는 R 코드이다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2025</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">520</span>  <span class="co"># 총 관측값 수</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>요일 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"평일"</span>, <span class="st">"주말"</span>), <span class="at">size =</span> n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>매장유형 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"직영점"</span>, <span class="st">"가맹점"</span>), <span class="at">size =</span> n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>일매출 <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(n, <span class="at">mean =</span> <span class="dv">2000000</span>, <span class="at">sd =</span> <span class="dv">250000</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ifelse</span>(매장유형 <span class="sc">==</span> <span class="st">"직영점"</span>, <span class="dv">200000</span>, <span class="sc">-</span><span class="dv">100000</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ifelse</span>(요일 <span class="sc">==</span> <span class="st">"주말"</span>, <span class="dv">300000</span>, <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ifelse</span>(매장유형 <span class="sc">==</span> <span class="st">"가맹점"</span> <span class="sc">&amp;</span> 요일 <span class="sc">==</span> <span class="st">"주말"</span>, <span class="dv">200000</span>, <span class="dv">0</span>))</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>exdata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  점포<span class="at">ID =</span> <span class="fu">paste0</span>(<span class="st">"S"</span>, <span class="fu">sprintf</span>(<span class="st">"%03d"</span>, <span class="dv">1</span><span class="sc">:</span>n)),</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  요일 <span class="ot">=</span> 요일,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  매장유형 <span class="ot">=</span> 매장유형,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  일매출 <span class="ot">=</span> 일매출</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(exdata, <span class="st">"data/ch5_data2.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 데이터셋은 아래 실습에서 aov() 함수로 분석하고, interaction.plot()을 통해 시각화하며, 의미 있는 해석과 전략 도출로 이어질 수 있도록 설계되었다.</p>
</section>
<section id="기술통계-확인-분석-전에-반드시-점검할-것" class="level3" data-number="5.5.4">
<h3 data-number="5.5.4" class="anchored" data-anchor-id="기술통계-확인-분석-전에-반드시-점검할-것"><span class="header-section-number">5.5.4</span> 기술통계 확인: 분석 전에 반드시 점검할 것</h3>
<p>분석에 앞서 데이터의 기초 통계를 반드시 점검해야 한다. 그룹별 평균, 표준편차, 관측 수를 확인해야 이후 분석 결과가 왜 그렇게 나왔는지를 설명할 수 있다. 이를 R로 실행하면 다음과 같다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 전체 기술통계</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(exdata<span class="sc">$</span>일매출)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
1224579 1994755 2285782 2248272 2497456 3317698 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 요인별 평균과 표준편차</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>exdata <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(매장유형, 요일) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    평균매출 <span class="ot">=</span> <span class="fu">mean</span>(일매출),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    표준편차 <span class="ot">=</span> <span class="fu">sd</span>(일매출),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    관측수 <span class="ot">=</span> <span class="fu">n</span>()</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
# Groups:   매장유형 [2]
  매장유형 요일  평균매출 표준편차 관측수
  &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;  &lt;int&gt;
1 가맹점   주말  2401508.  237267.    139
2 가맹점   평일  1875729.  256853.    136
3 직영점   주말  2514837.  272807.    130
4 직영점   평일  2202292.  235223.    115</code></pre>
</div>
</div>
<p>이 결과는 이후 분석에서 상호작용 효과나 주효과를 해석할 때 핵심 참고자료가 된다. 특히 주말 매출이 증가했더라도 가맹점에만 해당되는가, 모든 매장에서 동일한가를 이해하는 데 중요한 단서를 제공한다.</p>
</section>
<section id="이원배치-anova-분석-실행" class="level3" data-number="5.5.5">
<h3 data-number="5.5.5" class="anchored" data-anchor-id="이원배치-anova-분석-실행"><span class="header-section-number">5.5.5</span> 이원배치 ANOVA 분석 실행</h3>
<p>이제 분석을 시작한다. aov() 함수는 두 요인의 주효과와 상호작용 효과를 동시에 분석할 수 있다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">aov</span>(일매출 <span class="sc">~</span> 매장유형 <span class="sc">*</span> 요일, <span class="at">data =</span> exdata)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               Df    Sum Sq   Mean Sq F value   Pr(&gt;F)    
매장유형        1 6.656e+12 6.656e+12  105.40  &lt; 2e-16 ***
요일            1 2.349e+13 2.349e+13  372.06  &lt; 2e-16 ***
매장유형:요일   1 1.470e+12 1.470e+12   23.28 1.85e-06 ***
Residuals     516 3.258e+13 6.315e+10                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>결과표에는 매장유형, 요일, 매장유형:요일 세 가지 요인에 대한 F값과 p값이 나타난다. 상호작용 항(:)의 p값이 0.05 미만이면 두 요인 간 상호작용이 통계적으로 유의하다는 뜻이다.</p>
</section>
<section id="상호작용-효과-시각화" class="level3" data-number="5.5.6">
<h3 data-number="5.5.6" class="anchored" data-anchor-id="상호작용-효과-시각화"><span class="header-section-number">5.5.6</span> 상호작용 효과 시각화</h3>
<p>분석 결과를 시각적으로 표현하면 해석이 훨씬 쉬워진다. 특히 상호작용 효과는 interaction.plot()으로 선의 패턴을 확인하면 직관적으로 이해할 수 있다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  exdata<span class="sc">$</span>요일,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  exdata<span class="sc">$</span>매장유형,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  exdata<span class="sc">$</span>일매출,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">lwd =</span> <span class="dv">2</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"일매출"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"요일"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">trace.label =</span> <span class="st">"매장유형"</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Chapter5_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>선이 서로 평행하지 않다면 상호작용이 존재할 가능성이 크다. 선이 교차하거나 간격이 크게 벌어지면 효과가 강하다는 것을 의미한다.</p>
</section>
<section id="분석-결과의-해석과-의사결정" class="level3" data-number="5.5.7">
<h3 data-number="5.5.7" class="anchored" data-anchor-id="분석-결과의-해석과-의사결정"><span class="header-section-number">5.5.7</span> 분석 결과의 해석과 의사결정</h3>
<p>분석 결과, 매장유형과 요일 간에 상호작용이 유의하다면 다음과 같은 전략을 고려할 수 있다.</p>
<p><strong>-</strong> 직영점은 주중 인력 최적화 중심 전략, 가맹점은 주말 타겟 프로모션 강화 <br> <strong>-</strong> 전체 마케팅 예산을 요일별-매장유형별로 차등 분배 <br> <strong>-</strong> 주말 매출이 급증하는 매장에 대한 식자재 물류 최적화 <br></p>
<p>이처럼 분석은 단순한 보고서를 넘어서 <strong>실제 경영 실행을 위한 판단 도구</strong>로 기능해야 한다. 실습 결과가 수치로만 머물지 않고, 전략으로 연결되는 사고방식을 훈련하는 것이 이 장의 핵심 목표다.</p>
<p><strong>중요사항</strong></p>
<p>주어진 코드를 복사/붙여넣기로만 연습하면 결국 아무것도 하지 못하게 된다. 다음의 사항을 주지하라.</p>
<p><strong>-</strong> 주어진 코드를 먼저 눈으로 읽고 이해하려고 노력하라. <br> <strong>-</strong> 주어진 코드가 이해가 되지 않는다면 복사/붙여넣기하여 ChatGPT에게 한 줄 한 줄 해석해달라고 하라. <br> <strong>-</strong> 주어진 코드에 만족하지 말고 VS Code + Copilot에게 프롬프트를 주고 동일한 결과를 만드는 코드를 생성하도록 하라. <br> <strong>-</strong> Copilot이 만들어준 코드를 실해해 보고 원래의 목적에 맞는 코드가 생성되어 분석한 것인지 확인하라. <br> <strong>-</strong> Copilot이 만든 코드를 본인이 수정하면서 보다 나은 결과 혹은 보다 개선된 코드를 만들어 보라.</p>
<p>분석 코드를 생성하는 것은 과거에 비해 분명히 시간과 노력을 많이 들이지 않아도 되는 일이 되었다. <strong>그러나, 코드를 전혀 이해하지 못하면 결국 아무 것도 하지 못하게 된다.</strong> 가장 중요한 것은 주어진 데이터로 <strong>무엇을 분석할지</strong> 명확하게 알고 있어야 하며, 이 목적을 달성하기 위해 <strong>어떤 통계적 분석방법을 사용</strong>할지 기본적인 지식이 있어야 한다. 또한 이를 사용하기 위해서는 해당 <strong>분석방법의 특징과 주의사항</strong>을 분명히 알아야 한다. 수학적 알고리즘까지는 아니더라도 데이터와 분석방법에 대한 <strong>이해와 통찰력</strong>은 매우 중요하다.</p>
</section>
</section>
<section id="실습-결과-해석과-전략적-의사결정" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="실습-결과-해석과-전략적-의사결정"><span class="header-section-number">5.6</span> 실습 결과 해석과 전략적 의사결정</h2>
<section id="유의하지-않은-결과에서-비즈니스-통찰을-얻는-법" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="유의하지-않은-결과에서-비즈니스-통찰을-얻는-법"><span class="header-section-number">5.6.1</span> 유의하지 않은 결과에서 비즈니스 통찰을 얻는 법</h3>
<p>통계 분석 결과에서 p-value가 0.05보다 크다는 이유로 분석을 무의미하다고 판단하는 것은 <strong>비즈니스 애널리틱스에서 가장 흔한 오해</strong> 중 하나다. p값은 통계적 유의성을 말해줄 뿐이지, 분석 자체의 가치나 전략적 시사점을 평가해주지는 않는다. 때로는 <strong>주효과는 유의하지 않지만, 상호작용 효과가 유의</strong>한 경우가 있고, 이것이 실제 경영전략 수립에 있어 더 큰 인사이트를 제공하는 경우가 많다.</p>
<p>이번 장에서는 외식 프랜차이즈 데이터를 기반으로, <strong>두 개의 독립변수(시간대, 매장유형)가 각각은 유의하지 않지만, 상호작용에서는 유의미한 차이를 보이는 사례</strong>를 분석한다. 이 사례를 통해 통계적 결과를 <strong>단순 해석이 아닌 전략적 판단의 근거</strong>로 확장하는 훈련을 한다.</p>
</section>
<section id="사례-시간대와-매장유형에-따른-고객당-매출-분석" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="사례-시간대와-매장유형에-따른-고객당-매출-분석"><span class="header-section-number">5.6.2</span> 사례: 시간대와 매장유형에 따른 고객당 매출 분석</h3>
<p>한 외식 브랜드에서는 고객당 평균 매출이 어떤 요인에 의해 영향을 받는지를 분석하고자 했다. 독립변수는 다음과 같다:</p>
<p><strong>-</strong> <strong>시간대</strong>: 점심 / 저녁 <br> <strong>-</strong> <strong>매장유형</strong>: 직영점 / 가맹점 <br><br>
<strong>-</strong> <strong>종속변수</strong>: 고객 1인당 평균 매출액 (원) <br></p>
</section>
<section id="데이터-구조와-가정" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="데이터-구조와-가정"><span class="header-section-number">5.6.3</span> 데이터 구조와 가정</h3>
<p>분석에 사용된 데이터는 총 520건으로 구성되었으며, 각 거래별로 시간대, 매장유형, 고객당 평균 매출이 기록되어 있다. 이 데이터는 다음과 같은 구조를 갖는다.</p>
<table class="table-striped table-hover table">
<thead>
<tr class="header">
<th style="text-align: center;">변수</th>
<th style="text-align: left;">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">거래ID</td>
<td style="text-align: left;">거래 고유 식별자</td>
</tr>
<tr class="even">
<td style="text-align: center;">시간대</td>
<td style="text-align: left;">점심 / 저녁</td>
</tr>
<tr class="odd">
<td style="text-align: center;">매장유형</td>
<td style="text-align: left;">직영점 / 가맹점</td>
</tr>
<tr class="even">
<td style="text-align: center;">고객당매출</td>
<td style="text-align: left;">해당 거래의 1인당 매출 (원)</td>
</tr>
</tbody>
</table>
</section>
<section id="데이터-생성" class="level3" data-number="5.6.4">
<h3 data-number="5.6.4" class="anchored" data-anchor-id="데이터-생성"><span class="header-section-number">5.6.4</span> 데이터 생성</h3>
<p>분석에 사용할 데이터를 다음 코드로 생성할 수 있다:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">4321</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">520</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>시간대 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"점심"</span>, <span class="st">"저녁"</span>), <span class="at">each =</span> n <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>매장유형 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"직영점"</span>, <span class="st">"가맹점"</span>), <span class="at">times =</span> n <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 네 조합을 정확히 설계</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">with</span>(<span class="fu">data.frame</span>(시간대, 매장유형),</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">ifelse</span>(시간대 <span class="sc">==</span> <span class="st">"점심"</span> <span class="sc">&amp;</span> 매장유형 <span class="sc">==</span> <span class="st">"직영점"</span>, <span class="dv">15000</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>           <span class="fu">ifelse</span>(시간대 <span class="sc">==</span> <span class="st">"점심"</span> <span class="sc">&amp;</span> 매장유형 <span class="sc">==</span> <span class="st">"가맹점"</span>, <span class="dv">17000</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>           <span class="fu">ifelse</span>(시간대 <span class="sc">==</span> <span class="st">"저녁"</span> <span class="sc">&amp;</span> 매장유형 <span class="sc">==</span> <span class="st">"직영점"</span>, <span class="dv">17000</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>           <span class="dv">15000</span>))))  <span class="co"># 저녁 &amp; 가맹점</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 오차는 통제된 수준에서만 추가</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>고객당매출 <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(n, <span class="at">mean =</span> mu, <span class="at">sd =</span> <span class="dv">500</span>))</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  거래<span class="at">ID =</span> <span class="fu">paste0</span>(<span class="st">"T"</span>, <span class="dv">1</span><span class="sc">:</span>n),</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  시간대 <span class="ot">=</span> 시간대,</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  매장유형 <span class="ot">=</span> 매장유형,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  고객당매출 <span class="ot">=</span> 고객당매출</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(df, <span class="st">"data/ch5_data3.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="기술통계로-전반-구조-파악하기" class="level3" data-number="5.6.5">
<h3 data-number="5.6.5" class="anchored" data-anchor-id="기술통계로-전반-구조-파악하기"><span class="header-section-number">5.6.5</span> 기술통계로 전반 구조 파악하기</h3>
<p>분석에 앞서 반드시 기술통계를 통해 전반적인 분포와 그룹 간 차이를 확인해야 한다. 아래는 시간대와 매장유형 조합에 따른 평균 매출과 표준편차이다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(시간대, 매장유형) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    평균매출 <span class="ot">=</span> <span class="fu">mean</span>(고객당매출),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    표준편차 <span class="ot">=</span> <span class="fu">sd</span>(고객당매출),</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    관측수 <span class="ot">=</span> <span class="fu">n</span>()</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
# Groups:   시간대 [2]
  시간대 매장유형 평균매출 표준편차 관측수
  &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;  &lt;int&gt;
1 저녁   가맹점     14944.     503.    130
2 저녁   직영점     17052.     460.    130
3 점심   가맹점     17073.     479.    130
4 점심   직영점     15000.     475.    130</code></pre>
</div>
</div>
</section>
<section id="분석-실행-및-결과-확인" class="level3" data-number="5.6.6">
<h3 data-number="5.6.6" class="anchored" data-anchor-id="분석-실행-및-결과-확인"><span class="header-section-number">5.6.6</span> 분석 실행 및 결과 확인</h3>
<p>분석은 aov() 함수로 수행하며, 결과는 다음과 같다:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">aov</span>(고객당매출 <span class="sc">~</span> 시간대 <span class="sc">*</span> 매장유형, <span class="at">data =</span> df)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 Df    Sum Sq   Mean Sq  F value Pr(&gt;F)    
시간대            1    191578    191578    0.833  0.362    
매장유형          1     39690     39690    0.173  0.678    
시간대:매장유형   1 568532453 568532453 2473.288 &lt;2e-16 ***
Residuals       516 118612440    229869                    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>이 결과는 매우 강력하다. <strong>시간대와 매장유형 각각은 고객당 매출에 유의미한 영향을 주지 않지만, 두 요인이 결합될 때 강한 상호작용이 나타난다.</strong></p>
</section>
<section id="상호작용-시각화" class="level3" data-number="5.6.7">
<h3 data-number="5.6.7" class="anchored" data-anchor-id="상호작용-시각화"><span class="header-section-number">5.6.7</span> 상호작용 시각화</h3>
<p>시각화를 통해 이러한 상호작용을 확인하면 더욱 직관적으로 이해할 수 있다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction.plot</span>(df<span class="sc">$</span>시간대, df<span class="sc">$</span>매장유형, df<span class="sc">$</span>고객당매출,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>), <span class="at">lwd =</span> <span class="dv">2</span>,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ylab =</span> <span class="st">"고객당 매출"</span>, <span class="at">xlab =</span> <span class="st">"시간대"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Chapter5_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>이 그래프에서 선이 교차하거나 극단적으로 벌어진다면, 두 요인의 조합에서 상호작용이 강하게 존재한다는 의미다. 실제로 위 시나리오에서는 점심-가맹점과 저녁-직영점에서 매출이 높고, 나머지는 낮은 경향이 명확하게 나타난다.</p>
</section>
<section id="전략적-해석" class="level3" data-number="5.6.8">
<h3 data-number="5.6.8" class="anchored" data-anchor-id="전략적-해석"><span class="header-section-number">5.6.8</span> 전략적 해석</h3>
<p>단순히 “점심이 더 팔린다”, “직영점이 더 잘된다” 같은 해석은 이 경우에는 <strong>틀린 해석</strong>이다. 왜냐하면 주효과는 통계적으로 유의하지 않기 때문이다. 전략적 의사결정은 다음과 같은 방식으로 전개되어야 한다.</p>
<p><strong>-</strong> <strong>직영점은 저녁에 강하다</strong>: 회식 수요, 가족 외식, 브랜드 인지도 효과 <br> <strong>-</strong> <strong>가맹점은 점심에 강하다</strong>: 근무지 주변, 테이크아웃 고객 비율이 높음 <br> <strong>-</strong> 그러나, 직영점과 가맹점 모두 점심과 저녁 매출의 표준편차가 평균에 비해 상당히 크다는 점이 중요하다 <br> <strong>-</strong> 전체적으로 “시간대”나 “매장유형”만 보고 마케팅 전략을 짜면 실패할 수 있다 <br> <strong>-</strong> 특정 조합별로 <strong>메뉴 구성, 인력 배치, 이벤트 타이밍을 다르게 설계해야 한다</strong> <br></p>
<p>이번 분석은 통계 수치 그 자체보다, <strong>숨어 있는 조합의 패턴을 해석</strong>하고 실질적 전략으로 연결하는 과정에 집중했다. p-value는 판단의 출발점이지 종착점이 아니다. 복합적 요인들이 작용하는 외식업 현실에서는, 상호작용 분석을 통해 정교한 실행 전략의 근거를 만들어야 한다.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Chapter4.html" class="pagination-link  aria-label=" &lt;span="" 분산분석&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">일원배치 분산분석</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Chapter6.html" class="pagination-link" aria-label="<span class='chapter-number'>6</span>&nbsp; <span class='chapter-title'>회귀분석: 통계의 꽃</span>">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">회귀분석: 통계의 꽃</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>